<!DOCTYPE html>
<html>
<head>
    <title>Unbound - {{ hostname }}</title>
    <meta http-equiv="refresh" content="{{ refresh }}">
    <style>
        :root {
            /* Global Colors */
            --bg-body: #353c42;
            --bg-sidebar: #272c30;
            --bg-header: #272c30;
            --bg-subheader: #1e2225;
            --bg-hover: #22272a;
            --text-subheader: #8e989d;
            --text-link: #bdc4ca;
            --text-bright: #ffffff;
            --text-label: #b0c5cb;
            --border-card: #696969;
            --border-sidebar: #2c3b41;
            /* Stat Box Backgrounds */
            --box-blue: #007997;
            --box-green: #005c32;
            --box-yellow: #b1720c;
            --box-red: #913225;
            /* Stat Box Icons */
            --icon-blue: #006780;
            --icon-green: #004e2b;
            --icon-yellow: #97610a;
            --icon-red: #7b2b1f;
        }

        body { margin: 0; font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif; background: var(--bg-body); color: var(--text-link); font-size: 14px; }
        /* Header */
        .header { height: 50px; display: flex; align-items: center; padding: 0 15px; background: var(--bg-header); position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
        .header-title { font-size: 20px; color: var(--text-bright); }
        /* Sidebar */
        .sidebar { position: fixed; top: 50px; left: 0; width: 230px; height: 100%; background: var(--bg-sidebar); padding-top: 0px; }
        .sidebar h2 { font-size: 12px; color: var(--text-subheader); background: var(--bg-subheader); padding: 12px 15px 12px 10px; margin: 0; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px; }
        .sidebar a { display: flex; align-items: center; padding: 12px 15px; color: var(--text-link); text-decoration: none; transition: 0.2s; border-left: 3px solid transparent; }
        .sidebar a:hover { background: var(--bg-hover); color: var(--text-bright); border-left-color: #3c8dbc; }
        .sidebar a svg { margin-right: 12px; width: 16px; height: 16px; fill: currentColor; }
        /* Main Content */
        .content { margin-left: 230px; padding: 70px 20px 20px 20px; }
        /* Stat Boxes */
        .box-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 25px; }
        .small-box { border-radius: 3px; position: relative; display: block; padding: 20px; color: #fff; box-shadow: 0 1px 1px rgba(0,0,0,0.1); overflow: hidden; height: 80px; }
        .small-box .inner { position: relative; z-index: 2; }
        .small-box h3 { font-size: 32px; font-weight: 700; margin: 5px 0 0 0; }
        .small-box p { font-size: 14px; margin: 0; font-weight: 400; opacity: 1; }
        /* Icons */
        .small-box .icon { position: absolute; top: 10px; right: 10px; z-index: 1; transition: all 0.3s linear; }
        .small-box .icon svg { width: 80px; height: 80px; }
        .small-box:hover .icon { transform: scale(1.1); }
        .bg-blue { background-color: var(--box-blue); }
        .bg-blue .icon svg { fill: var(--icon-blue); }
        .bg-green { background-color: var(--box-green); }
        .bg-green .icon svg { fill: var(--icon-green); }
        .bg-yellow { background-color: var(--box-yellow); }
        .bg-yellow .icon svg { fill: var(--icon-yellow); }
        .bg-red { background-color: var(--box-red); }
        .bg-red .icon svg { fill: var(--icon-red); }
        /* Cards */
        .card-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: var(--bg-sidebar); border: 1px solid var(--border-card); border-top: 3px solid #d2d6de; border-radius: 3px; padding: 15px; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
        .card h3 { margin: 0 0 15px 0; font-size: 18px; color: var(--text-bright); border-bottom: 1px solid var(--border-sidebar); padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 10px 5px; border-bottom: 1px solid var(--border-sidebar); font-size: 14px; color: var(--text-link); }
        td:first-child { font-weight: 600; width: 50%; color: var(--text-label); }
        .hist-container { display: flex; align-items: flex-end; height: 26px; background: #1a1e22; gap: 2px; padding: 2px; border-radius: 2px; }
        .hist-bar { flex: 1; background: var(--box-green); }
        .footer { margin-top: 30px; font-size: 12px; color: #666; padding-top: 10px; border-top: 1px solid var(--border-sidebar); }
    </style>
</head>
<body>
<div class="header">
    <div class="header-title">un<b>bound</b></div>
</div>
<div class="sidebar">
    <h2>LAN Services</h2>
    <a href="http://pi.hole/admin"><svg viewBox="0 0 24 24"><path d="M3,13h8V3H3V13z M3,21h8v-6H3V21z M13,21h8V11h-8V21z M13,3v6h8V3H13z"/></svg>Pi-hole Admin</a>
    <h2>Server</h2>
    <a href="http://ser.ver/"><svg viewBox="0 0 24 24"><path d="M12,9c-1.66,0-3,1.34-3,3s1.34,3,3,3s3-1.34,3-3S13.66,9,12,9z M12,19c-4,0-7.66-2.53-9-6c1.34-3.47,5-6,9-6s7.66,2.53,9,6"/></svg>LINK1</a>
    <a href="http://link2.ser.ver/"><svg viewBox="0 0 24 24"><path d="M21,3H3C1.9,3,1,3.9,1,5v12c0,1.1,0.9,2,2,2h5v2h8v-2h5c1.1,0,2-0.9,2-2V5C23,3.9,22.1,3,21,3z"/></svg>LINK2</a>
    <a href="http://link3.ser.ver/"><svg viewBox="0 0 24 24"><path d="M18,3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3H18z"/></svg>LINK3</a>
    <a href="http://link4.ser.ver/"><svg viewBox="0 0 24 24"><path d="M19.35,10.04C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.04C2.34,8.36 0,10.91 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.04M19,18H6A4,4 0 0,1 2,14C2,11.97 3.64,10.33 5.6,10.08L7.13,9.89L7.55,8.42C8.36,5.56 10.36,6 12,6C14.63,6 16.89,7.86 17.55,10.43L18.06,12.39L20.08,12.5C21.26,12.61 22,13.72 22,15A3,3 0 0,1 19,18M13,10H11V13H8L12,17L16,13H13V10Z"/></svg>LINK4</a>
    <a href="http://link5.ser.ver/web"><svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5V7.5L16,12L10,16.5Z"/></svg>LINK5</a>
    <a href="http://link6.ser.ver/"><svg viewBox="0 0 24 24"><path d="M12,2L2,7V17L12,22L22,17V7L12,2M12,4.31L19,7.81V16.19L12,19.69L5,16.19V7.81L12,4.31Z"/></svg>LINK6</a>
    <h2>Gateway</h2>
    <a href="http://192.168.0.1/"><svg viewBox="0 0 24 24"><path d="M5,11V13H19V11H5M3,3H21A2,2 0 0,1 23,5V19A2,2 0 0,1 21,21H3A2,2 0 0,1 1,19V5A2,2 0 0,1 3,3M3,15V19H21V15H3M3,5V9H21V5H3Z"/></svg>Router-Gateway</a>
    <a href="http://192.168.1.1/"><svg viewBox="0 0 24 24"><path d="M11,18H13V16H11V18M12,2A10,10,0,0,0,2,12A10,10,0,0,0,12,22A10,10,0,0,0,22,12A10,10,0,0,0,12,2"/></svg>Mesh-node</a>
</div>
<div class="content">
    <div class="box-container">
        <div class="small-box bg-blue">
            <div class="inner">
                <p>Total queries</p>
                <h3>{{ unbound.total }}</h3>
            </div>
            <div class="icon">
                <svg viewBox="0 0 24 24"><path d="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14M6,7H13V9H6V7M6,10H11V12H6V10Z"/></svg>
            </div>
        </div>
        <div class="small-box bg-green">
            <div class="inner">
                <p>Cache hits</p>
                <h3>{{ unbound.hits }}</h3>
            </div>
            <div class="icon">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
            </div>
        </div>
        <div class="small-box bg-yellow">
            <div class="inner">
                <p>Hit ratio</p>
                <h3>{{ unbound.ratio }}</h3>
            </div>
            <div class="icon">
                <svg viewBox="0 0 24 24"><path d="M11,2V22C5.9,21.5 2,17.2 2,12C2,6.8 5.9,2.5 11,2M13,2V11H22C21.5,6.2 17.8,2.5 13,2M13,13V22C17.7,21.5 21.5,17.8 22,13H13Z"/></svg>
            </div>
        </div>
        <div class="small-box bg-red">
            <div class="inner">
                <p>Cache misses</p>
                <h3>{{ unbound.misses }}</h3>
            </div>
            <div class="icon">
                <svg viewBox="0 0 24 24"><path d="M12,2C6.47,2,2,6.47,2,12s4.47,10,10,10s10-4.47,10-10S17.53,2,12,2z M17,15.59L15.59,17L12,13.41L8.41,17L7,15.59 L10.59,12L7,8.41L8.41,7L12,10.59L15.59,7L17,8.41L13.41,12L17,15.59z"/></svg>
            </div>
        </div>
    </div>
    <div class="card-row">
        <div class="card">
            <h3>Unbound Details</h3>
            <table>
                {% if unbound.Error %}<tr><td colspan="2" style="color:var(--box-red);">⚠️ {{ unbound.Error }}</td></tr>{% endif %}
                <tr><td>Cache Memory</td><td>{{ unbound.memory }}</td></tr>
                <tr><td>Unbound Uptime</td><td>{{ unbound.uptime }}</td></tr>
                <tr>
                    <td>Hit History</td>
                    <td>
                        <div class="hist-container">
                            {% for val in history %}<div class="hist-bar" style="height: {{ val }}%;"></div>{% endfor %}
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="card">
            <h3>System Health</h3>
            <table>
                {% for k, v in system.items() %}
                <tr><td>{{ k }}</td><td>{{ v }}</td></tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <div class="footer">Last Update: {{ timestamp }}</div>
</div>
</body>
</html>
